<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Recruiter Portal ‚Äì Living Brief</title>

    <style>
        :root {
            --bg-top: #eef6ff;
            --bg-mid: #f7faff;
            --bg-low: #ffffff;

            --card-bg: #ffffff;
            --card-border: #e4e8f0;

            --text: #0f172a;
            --text-soft: #475569;
            --text-muted: #94a3b8;

            --primary: #1e40af;
            --primary-light: #dbeafe;
            --primary-dark: #1e3a8a;

            --verified-soft: #dcfce7;
            --verified-text: #166534;

            --shadow-md: 0 10px 25px rgba(30, 41, 59, 0.08);
            --shadow-soft: 0 4px 12px rgba(0,0,0,0.06);

            --radius-lg: 16px;
            --radius-md: 12px;
        }

        body {
            font-family: system-ui, -apple-system, Segoe UI, sans-serif;
            background: linear-gradient(180deg, var(--bg-top) 0%, var(--bg-mid) 40%, var(--bg-low) 100%);
            margin: 0;
            color: var(--text);
        }

        * { box-sizing: border-box; }

        /* ===================== HEADER ===================== */

        header {
            max-width: 1200px;
            margin: 20px auto 10px;
            padding: 14px 24px;
            background: rgba(255,255,255,0.85);
            border-radius: 20px;
            border: 1px solid var(--card-border);
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow-soft);
        }

        .header-left { display:flex; flex-direction:column; }
        .header-title { font-weight: 700; font-size: 20px; }
        .header-subtitle { font-size: 13px; color: var(--text-muted); margin-top: 3px; }

        .header-right { display:flex; align-items:center; gap:12px; }

        .header-pill {
            background: var(--primary-light);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            display:flex; align-items:center; gap:6px;
            color: var(--primary-dark);
        }

        .avatar {
            width: 38px; height: 38px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #1e3a8a);
            color: white;
            font-weight: 700;
            display:flex; align-items:center; justify-content:center;
        }

        /* ===================== PAGE ===================== */

        .page {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px 20px 60px;
        }

        h1 {
            margin-bottom: 4px;
            font-size: 28px;
            font-weight: 800;
        }

        .page > p {
            margin-bottom: 16px;
            color: var(--text-soft);
            font-size: 15px;
        }

        /* ===================== TOOLBAR ===================== */

        .toolbar {
            display:flex;
            gap:10px;
            margin-bottom:14px;
            flex-wrap:wrap;
        }

        .search-input {
            flex:1;
            min-width:240px;
            padding:10px 16px;
            border-radius:12px;
            border:1px solid var(--card-border);
            background:white;
            font-size:14px;
        }

        .select {
            padding:10px 14px;
            border-radius:12px;
            border:1px solid var(--card-border);
            background:white;
            font-size:14px;
        }

        .toolbar-btn {
            padding:10px 14px;
            border-radius:12px;
            border:1px solid var(--card-border);
            background:white;
            cursor:pointer;
            font-size:14px;
        }

        /* ===================== FILTER DRAWER ===================== */

        #filter-drawer {
            display:none;
            padding:14px;
            background:white;
            border-radius:14px;
            border:1px solid var(--card-border);
            box-shadow:var(--shadow-soft);
            margin-bottom:12px;
        }

        /* ===================== STUDENT GRID ===================== */

        .grid {
            display:grid;
            grid-template-columns:repeat(auto-fill, minmax(260px, 1fr));
            gap:20px;
            margin-top:10px;
        }

        .card {
            background:white;
            border:1px solid var(--card-border);
            border-radius:var(--radius-lg);
            padding:18px;
            box-shadow:var(--shadow-md);
            display:flex;
            flex-direction:column;
            transition:0.2s ease;
        }

        .card:hover {
            transform:translateY(-3px);
            box-shadow:0 12px 24px rgba(0,0,0,0.12);
        }

        .student-header {
            display:flex;
            align-items:center;
            gap:12px;
        }

        .student-avatar {
            width:48px; height:48px;
            border-radius:50%;
            background:linear-gradient(135deg, #1e3a8a, #3b82f6);
            color:white;
            font-weight:700;
            font-size:15px;
            display:flex; align-items:center; justify-content:center;
        }

        .student-name { font-weight:700; font-size:16px; }
        .student-meta { font-size:13px; color:var(--text-soft); }

        .badge-row {
            display:flex;
            gap:6px;
            margin:10px 0;
            flex-wrap:wrap;
        }

        .badge {
            padding:4px 10px;
            border-radius:20px;
            font-size:11px;
            font-weight:600;
            white-space:nowrap;
        }

        .badge-verified { background:var(--verified-soft); color:var(--verified-text); }
        .badge-domain { background:var(--primary-light); color:var(--primary-dark); }
        .badge-school { background:#e0f2fe; color:#0369a1; }

        .card-metrics {
            margin-top:8px;
            font-size:13px;
            color:var(--text-soft);
            min-height:60px;
        }

        .btn {
            margin-top:auto;
            padding:12px 0;
            border-radius:12px;
            background:linear-gradient(90deg, var(--primary-dark), var(--primary));
            color:white;
            font-size:14px;
            font-weight:600;
            border:none;
            cursor:pointer;
        }

        .btn:hover { filter:brightness(1.05); }

        /* ===================== PROFILE PANEL (SPA, NO SCROLL) ===================== */

        #profile-panel {
            display:none;
            background:white;
            border:1px solid var(--card-border);
            border-radius:20px;
            padding:24px;
            box-shadow:var(--shadow-md);
            margin-top:20px;
        }

        #back-btn {
            background:none;
            border:none;
            color:var(--primary-dark);
            font-size:14px;
            cursor:pointer;
            margin-bottom:10px;
        }

        /* ===================== COPILOT (AI ASSISTANT) ===================== */

        .copilot-toggle {
            position:fixed;
            bottom:20px;
            right:20px;
            padding:10px 14px;
            border-radius:999px;
            border:none;
            background:linear-gradient(90deg,#1e3a8a,#2563eb);
            color:white;
            font-weight:600;
            font-size:14px;
            box-shadow:0 10px 25px rgba(15,23,42,0.3);
            cursor:pointer;
            z-index:50;
            display:flex;
            align-items:center;
            gap:6px;
        }

        #copilot-panel {
            position:fixed;
            bottom:80px;
            right:20px;
            width:340px;
            max-height:480px;
            background:white;
            border-radius:18px;
            box-shadow:0 18px 50px rgba(15,23,42,0.45);
            border:1px solid var(--card-border);
            display:none;
            flex-direction:column;
            overflow:hidden;
            z-index:60;
        }

        .copilot-header {
            padding:10px 14px;
            border-bottom:1px solid var(--card-border);
            display:flex;
            justify-content:space-between;
            align-items:center;
            background:linear-gradient(90deg,#e0f2fe,#e0e7ff);
        }

        .copilot-body {
            padding:10px;
            flex:1;
            overflow-y:auto;
            font-size:13px;
        }

        .copilot-footer {
            border-top:1px solid var(--card-border);
            padding:8px;
            display:flex;
            gap:6px;
        }

        .copilot-input {
            flex:1;
            padding:8px;
            border-radius:10px;
            border:1px solid var(--card-border);
            font-size:13px;
        }

        .copilot-send {
            padding:8px 10px;
            border-radius:10px;
            border:none;
            background:var(--primary-dark);
            color:white;
            font-size:13px;
            cursor:pointer;
        }

        .msg {
            margin-bottom:8px;
            padding:8px 10px;
            border-radius:10px;
            max-width:90%;
        }

        .msg.user {
            margin-left:auto;
            background:#e0f2fe;
            color:#0f172a;
        }

        .msg.bot {
            margin-right:auto;
            background:#f1f5f9;
            color:#0f172a;
        }

        .copilot-suggestion-row {
            display:flex;
            flex-wrap:wrap;
            gap:6px;
            padding:6px 10px 4px;
        }

        .copilot-chip {
            font-size:11px;
            padding:4px 8px;
            border-radius:999px;
            border:1px solid #d1d5db;
            background:#f9fafb;
            cursor:pointer;
        }

        @media(max-width:640px){
            #copilot-panel{
                right:10px;
                left:10px;
                width:auto;
            }
            .copilot-toggle{
                right:10px;
                bottom:10px;
            }
        }

    </style>
</head>
<body>

<header>
    <div class="header-left">
        <div class="header-title">Recruiter Portal</div>
        <div class="header-subtitle" id="header-subtitle">Browse verified student advocates</div>
    </div>
    <div class="header-right">
        <div class="header-pill">‚öñÔ∏è <span id="header-count">0 candidates</span></div>
        <div class="avatar">AJ</div>
    </div>
</header>

<main class="page">
    <h1>Discover Verified Law Students</h1>
    <p>Search, filter, and shortlist candidates based on real case performance.</p>

    <!-- Toolbar -->
    <div class="toolbar">
        <input type="text" id="search-input" class="search-input" placeholder="Search by name, school, or specialization‚Ä¶"/>
        <select id="sort-select" class="select">
            <option value="name">Sort: Name A‚ÄìZ</option>
            <option value="rating">Sort: Best Rating</option>
            <option value="cases">Sort: Most Cases</option>
            <option value="completion">Sort: Highest Completion</option>
        </select>
        <button id="filter-toggle" class="toolbar-btn">Filters</button>
    </div>

    <!-- Filters -->
    <div id="filter-drawer">
        <label>
            <input type="checkbox" id="filter-verified"> Verified only
        </label>
        <select id="filter-domain" class="select" style="margin-left:14px;">
            <option value="all">All domains</option>
        </select>
        <select id="filter-school" class="select" style="margin-left:14px;">
            <option value="all">All schools</option>
        </select>
    </div>

    <!-- Grid -->
    <div id="student-grid" class="grid"></div>

    <div style="text-align:center; margin-top:20px;">
        <button id="load-more-btn" class="toolbar-btn" style="display:none;">Load more</button>
    </div>

    <!-- Profile Panel (SPA, no scroll) -->
    <div id="profile-panel">
        <button id="back-btn">‚Üê Back to results</button>
        <h2 id="profile-name"></h2>
        <p id="profile-meta" style="color:var(--text-soft); margin-bottom:8px;"></p>
        <p id="profile-details"></p>
        <div id="profile-cases"></div>
    </div>
</main>

<!-- Copilot Toggle -->
<button class="copilot-toggle" id="copilot-toggle">ü§ñ Copilot</button>

<!-- Copilot Panel -->
<div id="copilot-panel">
    <div class="copilot-header">
        <div>
            <strong>Recruiter Copilot</strong>
            <div style="font-size:11px; color:#475569;">Ask about candidates & roles</div>
        </div>
        <button id="copilot-close" style="border:none;background:none;font-size:16px;cursor:pointer;">‚úï</button>
    </div>
    <div class="copilot-body" id="copilot-body">
        <div class="msg bot">
            Hi! I can help you:
            <ul style="margin:6px 0 0 16px; padding:0;">
                <li>Summarize a student's profile</li>
                <li>Find best candidates for a role</li>
                <li>Compare two students</li>
            </ul>
        </div>
    </div>
    <div class="copilot-suggestion-row">
        <div class="copilot-chip" data-q="Recommend top students for Corporate M&A.">Top for Corporate M&A</div>
        <div class="copilot-chip" data-q="Summarize Nina Patel as a candidate.">Summarize Nina</div>
        <div class="copilot-chip" data-q="Compare Arjun Singh and Riya Kapoor.">Compare Arjun & Riya</div>
    </div>
    <div class="copilot-footer">
        <input id="copilot-input" class="copilot-input" placeholder="Ask anything about students‚Ä¶"/>
        <button id="copilot-send" class="copilot-send">Send</button>
    </div>
</div>

<script>
    /* ========= DATA: 30 STUDENTS ========= */
    const students = [
        { id:"1", initials:"AK", name:"Amelia Khan", school:"Harvard Law", year:"3L", specialization:"Contract Law", completion:98, casesCount:12, rating:4.9, verified:true, cases:["Drafted indemnity clause","Negotiated vendor contract"] },
        { id:"2", initials:"DS", name:"David Smith", school:"Yale Law", year:"2L", specialization:"IP Law", completion:96, casesCount:8, rating:4.8, verified:true, cases:["Patent search","Trademark dispute"] },
        { id:"3", initials:"NP", name:"Nina Patel", school:"Columbia Law", year:"3L", specialization:"Constitutional Law", completion:99, casesCount:15, rating:5.0, verified:true, cases:["Free speech case","Due process petition"] },
        { id:"4", initials:"RK", name:"Riya Kapoor", school:"NYU Law", year:"2L", specialization:"Criminal Law", completion:92, casesCount:10, rating:4.7, verified:true, cases:["Defense prep","Bail motion"] },
        { id:"5", initials:"JS", name:"James Stewart", school:"Stanford Law", year:"3L", specialization:"Corporate Law", completion:97, casesCount:18, rating:4.9, verified:true },
        { id:"6", initials:"ML", name:"Mason Lee", school:"UCLA Law", year:"1L", specialization:"Environmental Law", completion:89, casesCount:5, rating:4.6, verified:true },
        { id:"7", initials:"TP", name:"Tanvi Patel", school:"Cambridge Law", year:"2L", specialization:"International Law", completion:95, casesCount:14, rating:4.9, verified:true },
        { id:"8", initials:"OG", name:"Omar Ghani", school:"Georgetown Law", year:"3L", specialization:"Immigration Law", completion:90, casesCount:11, rating:4.7, verified:true },
        { id:"9", initials:"SR", name:"Sophia Reyes", school:"Duke Law", year:"2L", specialization:"Civil Rights", completion:93, casesCount:9, rating:4.8, verified:true },
        { id:"10", initials:"YL", name:"Yuki Lin", school:"Tokyo Univ", year:"LLM", specialization:"International Trade", completion:91, casesCount:7, rating:4.6, verified:true },

        {id:"11", initials:"HM", name:"Hannah Moore", school:"UPenn Law", year:"3L", specialization:"Family Law", completion:93, casesCount:12, rating:4.8, verified:true},
        {id:"12", initials:"RG", name:"Rohan Gupta", school:"NLSIU", year:"4th Year", specialization:"Cyber Law", completion:88, casesCount:9, rating:4.7, verified:true},
        {id:"13", initials:"MB", name:"Maya Bhatt", school:"NLU Delhi", year:"3rd Year", specialization:"IPR Law", completion:97, casesCount:12, rating:4.9, verified:true},
        {id:"14", initials:"AS", name:"Arjun Singh", school:"GNLU", year:"5th Year", specialization:"Criminal Litigation", completion:91, casesCount:14, rating:4.8, verified:true},
        {id:"15", initials:"EV", name:"Elena Voss", school:"Oxford Law", year:"BCL", specialization:"Human Rights", completion:95, casesCount:16, rating:5.0, verified:true},
        {id:"16", initials:"KL", name:"Karan Lal", school:"NUS Law", year:"LLM", specialization:"Corporate Law", completion:92, casesCount:11, rating:4.7, verified:true},
        {id:"17", initials:"JT", name:"Julia Torres", school:"UCLA Law", year:"2L", specialization:"Media Law", completion:90, casesCount:7, rating:4.6, verified:true},
        {id:"18", initials:"IZ", name:"Imran Zaki", school:"SOAS", year:"LLM", specialization:"International Law", completion:93, casesCount:10, rating:4.9, verified:true},
        {id:"19", initials:"LK", name:"Leah Kim", school:"KCL", year:"2L", specialization:"Criminal Law", completion:91, casesCount:8, rating:4.8, verified:true},
        {id:"20", initials:"VS", name:"Vivek Shah", school:"Jindal Law", year:"3L", specialization:"Tech Law", completion:94, casesCount:13, rating:4.9, verified:true},
        {id:"21", initials:"JN", name:"Jaden Ng", school:"HKU Law", year:"2L", specialization:"International Arbitration", completion:92, casesCount:9, rating:4.7, verified:true},
        {id:"22", initials:"PS", name:"Priya Sethi", school:"NLU Mumbai", year:"4th Year", specialization:"Corporate Law", completion:95, casesCount:17, rating:4.9, verified:true},
        {id:"23", initials:"MT", name:"Mark Turner", school:"MIT Law", year:"1L", specialization:"AI Policy", completion:88, casesCount:6, rating:4.5, verified:true},
        {id:"24", initials:"AL", name:"Aisha Lopez", school:"Harvard Law", year:"2L", specialization:"IP Law", completion:90, casesCount:10, rating:4.7, verified:true},
        {id:"25", initials:"RR", name:"Rahul Rao", school:"IIT Kharagpur Law", year:"3rd Year", specialization:"Cyber Law", completion:92, casesCount:11, rating:4.8, verified:true},
        {id:"26", initials:"CP", name:"Chloe Park", school:"Seoul Univ Law", year:"LLM", specialization:"International Trade", completion:93, casesCount:9, rating:4.8, verified:true},
        {id:"27", initials:"ZB", name:"Zara Bedi", school:"NLU Bangalore", year:"5th Year", specialization:"Corporate Law", completion:96, casesCount:18, rating:4.9, verified:true},
        {id:"28", initials:"TE", name:"Tom Edwards", school:"Cambridge Law", year:"3L", specialization:"Contract Law", completion:94, casesCount:12, rating:4.8, verified:true},
        {id:"29", initials:"SB", name:"Sara Bloom", school:"Stanford Law", year:"1L", specialization:"Civil Rights", completion:89, casesCount:7, rating:4.6, verified:true},
        {id:"30", initials:"AM", name:"Aman Mehra", school:"Oxford Law", year:"2L", specialization:"Human Rights", completion:95, casesCount:14, rating:5.0, verified:true},
    ];

    document.getElementById("header-count").textContent = `${students.length} candidates`;

    /* ========= Filter setup ========= */
    const filterDomain = document.getElementById("filter-domain");
    const filterSchool = document.getElementById("filter-school");

    [...new Set(students.map(s=>s.specialization))].sort().forEach(sp => {
        const o=document.createElement("option");
        o.value=sp; o.textContent=sp;
        filterDomain.appendChild(o);
    });

    [...new Set(students.map(s=>s.school))].sort().forEach(sc => {
        const o=document.createElement("option");
        o.value=sc; o.textContent=sc;
        filterSchool.appendChild(o);
    });

    /* ========= State ========= */
    let searchTerm="", sortBy="name", showVerified=false, limit=12;

    const grid = document.getElementById("student-grid");
    const loadMoreBtn = document.getElementById("load-more-btn");
    const toolbarEl = document.querySelector(".toolbar");

    /* ========= Filtering + sorting ========= */
    function applyFilters() {
        let res=[...students];

        if (searchTerm.trim()) {
            const t = searchTerm.toLowerCase();
            res = res.filter(s =>
                s.name.toLowerCase().includes(t) ||
                s.school.toLowerCase().includes(t) ||
                s.specialization.toLowerCase().includes(t)
            );
        }

        if (showVerified) res = res.filter(s => s.verified);

        if (filterDomain.value !== "all") res = res.filter(s => s.specialization === filterDomain.value);
        if (filterSchool.value !== "all") res = res.filter(s => s.school === filterSchool.value);

        res.sort((a,b)=>{
            if (sortBy === "rating") return b.rating - a.rating;
            if (sortBy === "cases") return b.casesCount - a.casesCount;
            if (sortBy === "completion") return b.completion - a.completion;
            return a.name.localeCompare(b.name);
        });

        return res;
    }

    /* ========= Render grid ========= */
    function renderGrid() {
        const list=applyFilters();
        grid.innerHTML = "";

        const visible = list.slice(0, limit);
        visible.forEach(s=>{
            const card=document.createElement("div");
            card.className="card";
            card.innerHTML = `
            <div class="student-header">
                <div class="student-avatar">${s.initials}</div>
                <div>
                    <div class="student-name">${s.name}</div>
                    <div class="student-meta">${s.school} ‚Ä¢ ${s.year}</div>
                </div>
            </div>
            <div class="badge-row">
                <span class="badge badge-verified">VERIFIED</span>
                <span class="badge badge-domain">${s.specialization}</span>
                <span class="badge badge-school">${s.school}</span>
            </div>
            <div class="card-metrics">
                <div><b>Completion:</b> ${s.completion}%</div>
                <div><b>Cases:</b> ${s.casesCount}</div>
                <div><b>Rating:</b> ${s.rating} / 5</div>
            </div>
            <button class="btn" onclick="openProfile('${s.id}')">View Profile</button>
        `;
            grid.appendChild(card);
        });

        loadMoreBtn.style.display = list.length > limit ? "inline-block" : "none";
    }

    /* ========= SPA Profile (no scroll) ========= */
    const profilePanel = document.getElementById("profile-panel");
    const profileName = document.getElementById("profile-name");
    const profileMeta = document.getElementById("profile-meta");
    const profileDetails = document.getElementById("profile-details");
    const profileCases = document.getElementById("profile-cases");

    function openProfile(id) {
        const s = students.find(st => st.id === id);
        if (!s) return;

        profileName.textContent = s.name;
        profileMeta.textContent = `${s.school} ‚Ä¢ ${s.year} ‚Ä¢ ${s.specialization}`;
        profileDetails.innerHTML = `
        <b>Completion:</b> ${s.completion}%<br>
        <b>Cases:</b> ${s.casesCount}<br>
        <b>Rating:</b> ${s.rating} / 5
    `;

        profileCases.innerHTML = (s.cases || [])
            .map(c=>`<div style="padding:10px;margin-top:6px;border-radius:10px;background:#f1f5f9;border:1px solid var(--card-border);">${c}</div>`)
            .join("");

        // SPA switch: hide grid & toolbar, show profile, NO scroll movement
        grid.style.display = "none";
        toolbarEl.style.display = "none";
        document.getElementById("filter-drawer").style.display = "none";
        profilePanel.style.display = "block";
    }

    document.getElementById("back-btn").onclick = () => {
        profilePanel.style.display = "none";
        grid.style.display = "grid";
        toolbarEl.style.display = "flex";
    };

    /* ========= Toolbar events ========= */
    document.getElementById("search-input").oninput = e => {
        searchTerm = e.target.value.toLowerCase();
        limit = 12;
        renderGrid();
    };

    document.getElementById("sort-select").onchange = e => {
        sortBy = e.target.value;
        renderGrid();
    };

    document.getElementById("filter-toggle").onclick = () => {
        const fd = document.getElementById("filter-drawer");
        fd.style.display = fd.style.display === "none" ? "block" : "none";
    };

    document.getElementById("filter-verified").onchange = e => {
        showVerified = e.target.checked;
        renderGrid();
    };

    filterDomain.onchange = renderGrid;
    filterSchool.onchange = renderGrid;

    loadMoreBtn.onclick = () => {
        limit += 12;
        renderGrid();
    };

    /* ========= Initial render ========= */
    renderGrid();

    /* ========= Copilot (local AI-style logic) ========= */
    const copilotToggle = document.getElementById("copilot-toggle");
    const copilotPanel = document.getElementById("copilot-panel");
    const copilotClose = document.getElementById("copilot-close");
    const copilotBody = document.getElementById("copilot-body");
    const copilotInput = document.getElementById("copilot-input");
    const copilotSend = document.getElementById("copilot-send");

    copilotToggle.onclick = () => {
        copilotPanel.style.display = copilotPanel.style.display === "flex" ? "none" : "flex";
    };
    copilotClose.onclick = () => copilotPanel.style.display = "none";

    document.querySelectorAll(".copilot-chip").forEach(chip => {
        chip.addEventListener("click", () => {
            copilotInput.value = chip.dataset.q;
            handleCopilotQuery();
        });
    });

    copilotSend.onclick = handleCopilotQuery;
    copilotInput.addEventListener("keydown", e => {
        if (e.key === "Enter") handleCopilotQuery();
    });

    function appendMessage(text, from="bot") {
        const div=document.createElement("div");
        div.className = "msg " + from;
        div.textContent = text;
        copilotBody.appendChild(div);
        copilotBody.scrollTop = copilotBody.scrollHeight;
    }

    function handleCopilotQuery() {
        const q = copilotInput.value.trim();
        if (!q) return;

        appendMessage(q, "user");
        copilotInput.value = "";

        const answer = localCopilotAnswer(q);
        appendMessage(answer, "bot");

        // If in future you plug Gemini, you could call backend here instead of localCopilotAnswer.
        // Example:
        // callGeminiBackend(q).then(reply => appendMessage(reply, "bot"));
    }

    /* Simple heuristic "AI" over local dataset */
    function localCopilotAnswer(q) {
        const text = q.toLowerCase();

        // Summarize a student: "summarize Nina" or "profile of Arjun Singh"
        const maybeName = students.find(s =>
            text.includes(s.name.toLowerCase()) ||
            text.includes(s.initials.toLowerCase())
        );
        if (text.includes("summarize") || text.includes("profile")) {
            if (maybeName) {
                const s = maybeName;
                return `${s.name} (${s.school}, ${s.year}) specialises in ${s.specialization}.
Completion rate: ${s.completion}%. Cases handled: ${s.casesCount}. Rating: ${s.rating}/5.
They are a strong fit for matters involving ${s.specialization.toLowerCase()} and related dispute work.`;
            }
        }

        // Recommend by domain / role keywords
        const domainKeywords = [
            { key:"corporate", match:"Corporate Law" },
            { key:"m&a", match:"Corporate Law" },
            { key:"mergers", match:"Corporate Law" },
            { key:"arbitration", match:"International Arbitration" },
            { key:"criminal", match:"Criminal Law" },
            { key:"litigation", match:"Criminal Litigation" },
            { key:"ip", match:"IP Law" },
            { key:"intellectual property", match:"IP Law" },
            { key:"human rights", match:"Human Rights" },
            { key:"constitutional", match:"Constitutional Law" },
            { key:"cyber", match:"Cyber Law" },
            { key:"tech", match:"Tech Law" }
        ];

        const matchDomain = domainKeywords.find(d => text.includes(d.key));
        if (text.includes("recommend") || text.includes("best") || text.includes("top")) {
            let pool = students;
            if (matchDomain) {
                pool = pool.filter(s => s.specialization.toLowerCase().includes(matchDomain.match.toLowerCase()));
            }
            pool = pool.sort((a,b)=>b.rating - a.rating || b.casesCount - a.casesCount).slice(0,5);
            if (!pool.length) {
                return "I couldn‚Äôt find strong matches for that domain yet. Try a simpler query like ‚Äúbest students for Corporate Law‚Äù.";
            }
            const lines = pool.map(s => `‚Ä¢ ${s.name} ‚Äì ${s.specialization}, ${s.school}, rating ${s.rating}/5, ${s.casesCount} cases`);
            return `Here are strong candidates${matchDomain ? " for " + matchDomain.match : ""}:\n\n` + lines.join("\n");
        }

        // Compare two students
        if (text.includes("compare")) {
            const found = students.filter(s => text.includes(s.name.toLowerCase().split(" ")[0]));
            if (found.length >= 2) {
                const [a,b] = found;
                return `Comparison:\n\n` +
                    `${a.name}: ${a.specialization}, rating ${a.rating}/5, completion ${a.completion}%, ${a.casesCount} cases.\n` +
                    `${b.name}: ${b.specialization}, rating ${b.rating}/5, completion ${b.completion}%, ${b.casesCount} cases.\n\n` +
                    `For high-stakes matters in ${a.specialization.toLowerCase()}, ${a.rating >= b.rating ? a.name : b.name} looks slightly stronger overall.`;
            }
        }

        // Default
        return "I‚Äôve checked the current candidate pool. Try asking things like:\n‚Ä¢ ‚ÄúRecommend top students for Corporate M&A.‚Äù\n‚Ä¢ ‚ÄúSummarize Nina Patel as a candidate.‚Äù\n‚Ä¢ ‚ÄúCompare Arjun Singh and Riya Kapoor.‚Äù";
    }

    /* Stub example if you later add a backend with Gemini:
    async function callGeminiBackend(prompt) {
        const res = await fetch('/api/copilot', {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({ prompt })
        });
        const data = await res.json();
        return data.reply;
    }
    */
</script>
</body>
</html>
